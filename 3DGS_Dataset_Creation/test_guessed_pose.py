import numpy as np
import json

########################## coke initial#######################################0058




########################## underwater initial online#######################################


# R = np.array([
#     [ 0.96196251,  0.01625097,  0.27269770],
#     [ 0.02032253,  0.99120592, -0.13075860],
#     [-0.27242453,  0.13132678,  0.95317268]
# ])

# tvec = np.array([
#     -4.01222547,
#      0.90010749,
#     -1.20606364
# ])

##########################test initial guess holo new#######################################063

R = np.array([
    [ 0.999973306, -0.002365150,  0.006913285],
    [ 0.002369491,  0.999997000, -0.000619839],
    [-0.006911798,  0.000636203,  0.999975911]
])

tvec = np.array([
    1.0626929480810055,
   -0.0020057486001407773,
    4.203113864419443
])

##########################test initial guess coke#######################################for image 2(actual 5759, initial 5580)

# R = np.array([
#     [ 0.99977779, -0.00410746, -0.02067611],
#     [ 0.00422416,  0.99997538,  0.00560368],
#     [ 0.02065258, -0.00568977,  0.99977052]
# ])

# tvec = np.array([
#    -9.70199973,
#     0.44897223,
#    -0.45481091
# ])


##########################ground truth#######################################for testing

# R = np.array([
#     [ 0.9997651874074769,  -0.01223078357134774,   0.017887923868694708],
#     [ 0.017243190569452765,  0.9489776094171887,  -0.3148716710087194],
#     [-0.013124116239893558,  0.3151061801330919,   0.9489656752564095]
# ])

# tvec = np.array([
#    -1.25437111168831167,
#    -0.3542506714700255,
#     3.791449111719658
# ])

##########################ground truth#######################################for image 2

# R = np.array([
#     [ 0.9997651874074769,  -0.01223078357134774,   0.017887923868694708],
#     [ 0.017243190569452765,  0.9489776094171887,  -0.3148716710087194],
#     [-0.013124116239893558,  0.3151061801330919,   0.9489656752564095]
# ])

# tvec = np.array([
#    -1.25437111168831167,
#    -0.3542506714700255,
#     3.791449111719658
# ])


##########################good initial guess#######################################for image 1
# R = np.array([
#     [ 0.9980682372280458,  0.0038525256359259637,  0.0620076759984271],
#     [-0.015488456357091656, 0.9819914477773761,     0.28828941609067487],
#     [-0.06016561772454303, -0.18888608878982424,    0.9801541429313589]
# ])

# tvec = np.array([0.49945155336867925, 0.5670315455590497, -0.05017595485080646])

##########################ground truth#######################################for image 1
# R = np.array([
#     [ 0.9912667460752744,  0.04539799482941835,  -0.12381138958434183],
#     [-0.03090563015007028,  1.08382176549242,  0.1319257653529341],
#     [ 0.1286621277214873,  -0.1271951363441222,   0.9834907033512148]
# ])

# tvec = np.array([2.6583017666251947, 1.2040469601821748, 4.53092570245018])

transform = np.eye(4)
transform[:3, :3] = R  # Set rotation
transform[:3, 3] = tvec  # Set translation

# ðŸ”¹ Camera Intrinsics (Ensure Correct Values)
# fx = 1040.01
# fy = 1040.19
# width, height = 1264, 832
# cx, cy = 632, 416  # Adjust if needed

# width, height = 1280, 720
# fx = fy = 1040.0
# cx, cy = 640, 360

#########################holo#################

# width, height = 1278, 718
# fx = fy = 639.3933891482949
# cx, cy = 639, 359

#########################online ocean#################

# width, height = 1370, 913

# fx = 1511.4465585954013
# fy = 1513.0094765127171

# cx, cy = 686.6854575146281, 455.8992712479261

#########################online playroom split#################
# fx = 1039.9188287443126
# fy = 1039.9188287443126
# cx = 631.5
# cy = 415.5
# width = 1263
# height = 831

#########################online coke#################

# fx = 340.82879583167528
# fy = 340.82879583167528
# cx = 622
# cy = 342.5
# width = 1244
# height = 685

#########################holo new#################

fx = 640.11425588286841
fy = 640.11425588286841
cx = 639
cy = 639
width = 1278
height = 1278




# ðŸ”¹ Build JSON Structure
cameras_json = {
    "camera_intrinsics": {
        "1": {
            "width": width,
            "height": height,
            "focal_length": [fx, fy],
            "principal_point": [cx, cy]
        }
    },
    "frames": [
        {
            "file_path": "/home/roar/Desktop/playroom_custom/images/custom_pose.jpg",
            "transform_matrix": transform.tolist(),
            "camera_id": 1
        }
    ]
}

# ðŸ”¹ Save JSON File
with open("/home/roar/Desktop/holo_guessed_pose.json", "w") as f:
    json.dump(cameras_json, f, indent=4)

print("âœ… Saved /home/roar/Desktop/holo_guessed_pose.json")