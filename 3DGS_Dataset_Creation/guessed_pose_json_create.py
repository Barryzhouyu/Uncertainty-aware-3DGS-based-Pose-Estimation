import numpy as np
import json

########################## coke initial#######################################0058




########################## underwater initial online#######################################


# R = np.array([
#     [ 0.96196251,  0.01625097,  0.27269770],
#     [ 0.02032253,  0.99120592, -0.13075860],
#     [-0.27242453,  0.13132678,  0.95317268]
# ])

# tvec = np.array([
#     -4.01222547,
#      0.90010749,
#     -1.20606364
# ])

##########################test initial guess holo new#######################################063

# R = np.array([
#     [ 0.999973306, -0.002365150,  0.006913285],
#     [ 0.002369491,  0.999997000, -0.000619839],
#     [-0.006911798,  0.000636203,  0.999975911]
# ])

# tvec = np.array([
#     1.0626929480810055,
#    -0.0020057486001407773,
#     4.203113864419443
# ])

##########################test initial guess coke#######################################for image 2(actual 5759, initial 5580)

# R = np.array([
#     [ 0.99977779, -0.00410746, -0.02067611],
#     [ 0.00422416,  0.99997538,  0.00560368],
#     [ 0.02065258, -0.00568977,  0.99977052]
# ])

# tvec = np.array([
#    -9.70199973,
#     0.44897223,
#    -0.45481091
# ])

# R = np.array([
#     [ 0.99997911,  0.00180665, -0.00620574],
#     [-0.00181383,  0.99999769, -0.00115064],
#     [ 0.00620365,  0.00116187,  0.99998008]
# ])

# tvec = np.array([
#     -3.88094708,
#     -1.58566788,
#      5.00754482
# ])

####################holo_n#######################
# R = np.array([
#     [ 0.9999394504512598, -0.0007387180753729826, -0.010979513961818139],
#     [ 0.000751331333791315,  0.9999990625593893,   0.0011447189914916248],
#     [ 0.010978658044565624, -0.001152898932142569, 0.9999390680894475]
# ])

# tvec = np.array([
#     -0.9510429093077502,
#     -0.022571362384233844,
#      0.6604783744819799
# ])

# ####################holo_6#######################

# R = np.array([
#     [ 0.9993386618337614,  0.0031210462627239083,  0.03622841473944018 ],
#     [-0.003065468449292207,  0.9999940381149822, -0.0015895400836563058 ],
#     [-0.03623315977793469,  0.0014774317977805911,  0.9993422713604129 ]
# ])
# tvec = np.array([
#     -2.780266038447233,
#     -0.006543728726550393,
#     0.705963617463071
# ])

####################rov initial pls in output#######################

# R = np.array([
#     [ 0.9982681, -0.05738959, -0.01293218],
#     [ 0.05621535, 0.99538059, -0.07782878],
#     [ 0.01733900, 0.07696700, 0.99688286]
# ])

# tvec = np.array([
#     0.62281986,
#    -0.0011898,
#     0.13654501
# ])

R = np.array([
    [ 0.99826608, -0.05743746, -0.01287511],
    [ 0.05626842,  0.99538186, -0.07777408],
    [ 0.0172828 ,  0.07691477,  0.99688787]
])

tvec = np.array([
   -0.3502527,
   -0.00117187,
   -0.22820239
])




##########################ground truth#######################################for testing

# R = np.array([
#     [ 0.9997651874074769,  -0.01223078357134774,   0.017887923868694708],
#     [ 0.017243190569452765,  0.9489776094171887,  -0.3148716710087194],
#     [-0.013124116239893558,  0.3151061801330919,   0.9489656752564095]
# ])

# tvec = np.array([
#    -1.25437111168831167,
#    -0.3542506714700255,
#     3.791449111719658
# ])

##########################ground truth#######################################for image 2

# R = np.array([
#     [ 0.9997651874074769,  -0.01223078357134774,   0.017887923868694708],
#     [ 0.017243190569452765,  0.9489776094171887,  -0.3148716710087194],
#     [-0.013124116239893558,  0.3151061801330919,   0.9489656752564095]
# ])

# tvec = np.array([
#    -1.25437111168831167,
#    -0.3542506714700255,
#     3.791449111719658
# ])


##########################good initial guess#######################################for image 1
# R = np.array([
#     [ 0.9980682372280458,  0.0038525256359259637,  0.0620076759984271],
#     [-0.015488456357091656, 0.9819914477773761,     0.28828941609067487],
#     [-0.06016561772454303, -0.18888608878982424,    0.9801541429313589]
# ])

# tvec = np.array([0.49945155336867925, 0.5670315455590497, -0.05017595485080646])

##########################ground truth#######################################for image 1
# R = np.array([
#     [ 0.9912667460752744,  0.04539799482941835,  -0.12381138958434183],
#     [-0.03090563015007028,  1.08382176549242,  0.1319257653529341],
#     [ 0.1286621277214873,  -0.1271951363441222,   0.9834907033512148]
# ])

# tvec = np.array([2.6583017666251947, 1.2040469601821748, 4.53092570245018])

transform = np.eye(4)
transform[:3, :3] = R  # Set rotation
transform[:3, 3] = tvec  # Set translation

# ðŸ”¹ Camera Intrinsics (Ensure Correct Values)
# fx = 1040.01
# fy = 1040.19
# width, height = 1264, 832
# cx, cy = 632, 416  # Adjust if needed

# width, height = 1280, 720
# fx = fy = 1040.0
# cx, cy = 640, 360

#########################holo#################

# width, height = 1278, 718
# fx = fy = 639.3933891482949
# cx, cy = 639, 359

#########################online ocean#################

# width, height = 1370, 913

# fx = 1511.4465585954013
# fy = 1513.0094765127171

# cx, cy = 686.6854575146281, 455.8992712479261

#########################online playroom split#################
# fx = 1039.9188287443126
# fy = 1039.9188287443126
# cx = 631.5
# cy = 415.5
# width = 1263
# height = 831

#########################online coke#################

# fx = 340.82879583167528
# fy = 340.82879583167528
# cx = 622
# cy = 342.5
# width = 1244
# height = 685

# fx = 1388.8418229227916
# fy = 1388.8418229227916
# cx = 611.5
# cy = 341
# width = 1223
# height = 682

#########################holo new#################

# fx = 679.05327341055852
# fy = 679.05327341055852
# cx = 637.5
# cy = 637.5
# width = 1275
# height = 1275

# fx = 556.59731304919478
# fy = 556.59731304919478
# cx = 636.5
# cy = 636.5
# width = 1273
# height = 1273

############rov example 1, three cones##############
fx = 565.9287839594288
fy = 565.9287839594288
cx = 959.5
cy = 639.5
width = 1919
height = 1279

############rov example 2, big ship##############


# ðŸ”¹ Build JSON Structure
cameras_json = {
    "camera_intrinsics": {
        "1": {
            "width": width,
            "height": height,
            "focal_length": [fx, fy],
            "principal_point": [cx, cy]
        }
    },
    "frames": [
        {
            "file_path": "/home/roar/Desktop/playroom_custom/images/custom_pose.jpg",
            "transform_matrix": transform.tolist(),
            "camera_id": 1
        }
    ]
}

# ðŸ”¹ Save JSON File
with open("/home/roar/Desktop/guessed_pose.json", "w") as f:
    json.dump(cameras_json, f, indent=4)

print("âœ… Saved /home/roar/Desktop/guessed_pose.json")

